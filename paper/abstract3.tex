\abstract{
State-Machine Replication (SMR) is a basic building block of reliable
distributed systems. Improving SMR algorithms used by cloud-computing providers
can have a big impact on the reliability of the many computing services they
support. However, devising a new practical SMR algorithm is hard, often
justifying a publication in a top conference.

The problem is that SMR algorithms are not modular. Thus all the analysis,
proofs, and tests need to be done again from scratch when devising a new
algorithm. A modular approach allowing the reuse of existing techniques is
especially important because of the many different situations that a practical
SMR algorithm must face.

We present a framework that enables devising and composing modular SMR
algorithms. Crucially, with our framework, an algorithm is proved composable
once and for all in isolation. Our composition theorem, mechanically proved
with Isabelle/HOL, guarantees that the composition of any number of composable
algorithms is a correct SMR algorithm.

The key novelty of our framework is its practical applicability. 
Our framework is based on Generalized Paxos, therefore providing buit-in support
for algorithms optimizing the execution of commuting commands.
Moreover, we propose two specifications 
capturing the essence of modular SMR algorithms based on quorum systems.
We demonstrate that concrete
algorithms can easily be obtained by refinement from our abstract specifications, as
evidenced by TLA+ specifications ready to be checked by the TLC model checker.

}
