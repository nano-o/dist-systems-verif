\begin{abstract}

%State-Machine Replication (SMR) algorithms such as Paxos are notoriously hard to
%understand, let alone to devise. Moreover, there is no practical way to reuse
%and optimize existing SMR algorithms, therefore the cost of creating a new SMR
%algorithm is high.

State-Machine Replication (SMR) algorithms are notoriously hard to understand, and one can trust their correctness only by a costly formal specification and analysis.
Moreover, it is often impossible to reuse the results of formal analyses because
existing SMR algorithms are not modular.
The design of new SMR algorithms is therefore expensive.

To lower the cost of designing new SMR algorithms, we present a framework for composing SMR modules whose analysis can be done in isolation and reused. 
An SMR module is an SMR algorithm augmented with a composition interface and satisfying a specification called Composable Generalized Consensus. 
In the composition of two modules, the first module starts executing and can abort its execution and pass the baton to the second module at any time.
Our composition theorem guarantees that the composition of two SMR modules is itself an SMR module. %; therefore, composition can be applied repeatedly to a sequence of modules.
Module composition can be dynamic, allowing to build SMR algorithms that choose and switch at runtime between a set of modules, and that can be augmented with new modules at any time. 

To help module designers in practice, we propose TLA$^+$ specifications 
providing templates to devise SMR modules using the TLA$^+$ tools.
Using our specifications, we build modular versions of well-known SMR algorithms, enabling their composition and reuse in new SMR algorithms.

%With our specifications, algorithm designers can use the TLA$^+$ tools
%to prototype and debug new SMR algorithms. Moreover, we also provide a
%specification of CGC and a proof of the composition theorem in Isabelle/HOL\@.

\end{abstract}
